<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.3"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Adafruit Motor Shield v2 Linux Driver: Adafruit/MotorShield.cpp File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">Adafruit Motor Shield v2 Linux Driver<span id="projectnumber">&#160;2.0.0</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.3 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search",'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_1c75b7e4d4d7ed3852943954d0061d65.html">Adafruit</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#var-members">Variables</a>  </div>
  <div class="headertitle"><div class="title">MotorShield.cpp File Reference</div></div>
</div><!--header-->
<div class="contents">

<p>This is the implementation file for the Adafruit Motor Shield V2 for Arduino. It supports DC motors &amp; Stepper motors with microstepping as well as stacking-support. It is <em>not</em> compatible with the V1 library.  
<a href="#details">More...</a></p>
<div class="textblock"><code>#include &quot;<a class="el" href="_motor_shield_8hpp_source.html">MotorShield.hpp</a>&quot;</code><br />
<code>#include &quot;meb_print.h&quot;</code><br />
<code>#include &lt;stdio.h&gt;</code><br />
<code>#include &lt;math.h&gt;</code><br />
<code>#include &lt;algorithm&gt;</code><br />
<code>#include &lt;thread&gt;</code><br />
</div><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="var-members" name="var-members"></a>
Variables</h2></td></tr>
<tr class="memitem:ab47a1c5c20c2b9283061cebff7d6463d"><td class="memItemLeft" align="right" valign="top">static uint16_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_motor_shield_8cpp.html#ab47a1c5c20c2b9283061cebff7d6463d">Adafruit::microstepcurve8</a> []</td></tr>
<tr class="memdesc:ab47a1c5c20c2b9283061cebff7d6463d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Sinusoidal microstepping curve (sine curve between 0 and pi/2) for the PWM output (12-bit range), with n + 1 points (in this case, n = 8). The last point is the beginning of the next step.  <a href="_motor_shield_8cpp.html#ab47a1c5c20c2b9283061cebff7d6463d">More...</a><br /></td></tr>
<tr class="separator:ab47a1c5c20c2b9283061cebff7d6463d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae168cf267ccd459b63d0feee33452bdb"><td class="memItemLeft" align="right" valign="top">static uint16_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_motor_shield_8cpp.html#ae168cf267ccd459b63d0feee33452bdb">Adafruit::microstepcurve16</a> []</td></tr>
<tr class="memdesc:ae168cf267ccd459b63d0feee33452bdb"><td class="mdescLeft">&#160;</td><td class="mdescRight">Microstep curve for n = 16.  <a href="_motor_shield_8cpp.html#ae168cf267ccd459b63d0feee33452bdb">More...</a><br /></td></tr>
<tr class="separator:ae168cf267ccd459b63d0feee33452bdb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a94c32261bebc8e73fb641db53243a083"><td class="memItemLeft" align="right" valign="top">static uint16_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_motor_shield_8cpp.html#a94c32261bebc8e73fb641db53243a083">Adafruit::microstepcurve32</a> []</td></tr>
<tr class="memdesc:a94c32261bebc8e73fb641db53243a083"><td class="mdescLeft">&#160;</td><td class="mdescRight">Microstep curve for n = 32.  <a href="_motor_shield_8cpp.html#a94c32261bebc8e73fb641db53243a083">More...</a><br /></td></tr>
<tr class="separator:a94c32261bebc8e73fb641db53243a083"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac7e9b3fef08e0f0b9e39233e69450153"><td class="memItemLeft" align="right" valign="top">static uint16_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_motor_shield_8cpp.html#ac7e9b3fef08e0f0b9e39233e69450153">Adafruit::microstepcurve64</a> []</td></tr>
<tr class="memdesc:ac7e9b3fef08e0f0b9e39233e69450153"><td class="mdescLeft">&#160;</td><td class="mdescRight">Microstep curve for n = 64.  <a href="_motor_shield_8cpp.html#ac7e9b3fef08e0f0b9e39233e69450153">More...</a><br /></td></tr>
<tr class="separator:ac7e9b3fef08e0f0b9e39233e69450153"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aaf9aa154d27c8f4b6f356c62862dda07"><td class="memItemLeft" align="right" valign="top">static uint16_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_motor_shield_8cpp.html#aaf9aa154d27c8f4b6f356c62862dda07">Adafruit::microstepcurve128</a> []</td></tr>
<tr class="memdesc:aaf9aa154d27c8f4b6f356c62862dda07"><td class="mdescLeft">&#160;</td><td class="mdescRight">Microstep curve for n = 128.  <a href="_motor_shield_8cpp.html#aaf9aa154d27c8f4b6f356c62862dda07">More...</a><br /></td></tr>
<tr class="separator:aaf9aa154d27c8f4b6f356c62862dda07"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a04dd6ed9e982b70a3ccc666cf990197e"><td class="memItemLeft" align="right" valign="top">static uint16_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_motor_shield_8cpp.html#a04dd6ed9e982b70a3ccc666cf990197e">Adafruit::microstepcurve256</a> []</td></tr>
<tr class="memdesc:a04dd6ed9e982b70a3ccc666cf990197e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Microstep curve for n = 256.  <a href="_motor_shield_8cpp.html#a04dd6ed9e982b70a3ccc666cf990197e">More...</a><br /></td></tr>
<tr class="separator:a04dd6ed9e982b70a3ccc666cf990197e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a65500df65a6e2d43c1be65657e52415a"><td class="memItemLeft" align="right" valign="top"><a id="a65500df65a6e2d43c1be65657e52415a" name="a65500df65a6e2d43c1be65657e52415a"></a>
static uint16_t&#160;</td><td class="memItemRight" valign="bottom"><b>Adafruit::microstepcurve512</b> []</td></tr>
<tr class="memdesc:a65500df65a6e2d43c1be65657e52415a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Microstep curve for n = 512. <br /></td></tr>
<tr class="separator:a65500df65a6e2d43c1be65657e52415a"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p >This is the implementation file for the Adafruit Motor Shield V2 for Arduino. It supports DC motors &amp; Stepper motors with microstepping as well as stacking-support. It is <em>not</em> compatible with the V1 library. </p>
<dl class="section author"><dt>Author</dt><dd>Sunip K. Mukherjee (<a href="#" onclick="location.href='mai'+'lto:'+'sun'+'ip'+'kmu'+'kh'+'erj'+'ee'+'@gm'+'ai'+'l.c'+'om'; return false;">sunip<span class="obfuscator">.nosp@m.</span>kmuk<span class="obfuscator">.nosp@m.</span>herje<span class="obfuscator">.nosp@m.</span>e@gm<span class="obfuscator">.nosp@m.</span>ail.c<span class="obfuscator">.nosp@m.</span>om</a>), based on work by Limor Fried/Ladyada for Adafruit Industries.</dd></dl>
<dl class="section version"><dt>Version</dt><dd>2.0.0 </dd></dl>
<dl class="section date"><dt>Date</dt><dd>2022-03-24</dd></dl>
<p>BSD license, all text here must be included in any redistribution. </p>
</div><h2 class="groupheader">Variable Documentation</h2>
<a id="aaf9aa154d27c8f4b6f356c62862dda07" name="aaf9aa154d27c8f4b6f356c62862dda07"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aaf9aa154d27c8f4b6f356c62862dda07">&#9670;&nbsp;</a></span>microstepcurve128</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">uint16_t Adafruit::microstepcurve128[]</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<b>Initial value:</b><div class="fragment"><div class="line">= {0, 50, 100, 150, 200, 251, 301, 351, 401, 451, 501,</div>
<div class="line">                                           551, 600, 650, 700, 749, 798, 848, 897, 946, 995, 1043,</div>
<div class="line">                                           1092, 1140, 1188, 1236, 1284, 1332, 1379, 1426, 1473, 1520, 1567,</div>
<div class="line">                                           1613, 1659, 1705, 1750, 1796, 1841, 1885, 1930, 1974, 2018, 2061,</div>
<div class="line">                                           2105, 2148, 2190, 2233, 2275, 2316, 2357, 2398, 2439, 2479, 2519,</div>
<div class="line">                                           2558, 2597, 2636, 2674, 2712, 2750, 2787, 2823, 2859, 2895, 2930,</div>
<div class="line">                                           2965, 3000, 3034, 3067, 3100, 3133, 3165, 3197, 3228, 3258, 3289,</div>
<div class="line">                                           3318, 3348, 3376, 3404, 3432, 3459, 3486, 3512, 3537, 3563, 3587,</div>
<div class="line">                                           3611, 3634, 3657, 3680, 3701, 3723, 3743, 3763, 3783, 3802, 3820,</div>
<div class="line">                                           3838, 3855, 3872, 3888, 3903, 3918, 3932, 3946, 3959, 3972, 3984,</div>
<div class="line">                                           3995, 4006, 4016, 4025, 4034, 4042, 4050, 4057, 4064, 4070, 4075,</div>
<div class="line">                                           4079, 4083, 4087, 4090, 4092, 4093, 4094, 4095}</div>
</div><!-- fragment -->
<p>Microstep curve for n = 128. </p>

</div>
</div>
<a id="ae168cf267ccd459b63d0feee33452bdb" name="ae168cf267ccd459b63d0feee33452bdb"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae168cf267ccd459b63d0feee33452bdb">&#9670;&nbsp;</a></span>microstepcurve16</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">uint16_t Adafruit::microstepcurve16[]</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<b>Initial value:</b><div class="fragment"><div class="line">= {0, 401, 798, 1188, 1567, 1930, 2275, 2597, 2895, 3165, 3404,</div>
<div class="line">                                          3611, 3783, 3918, 4016, 4075, 4095}</div>
</div><!-- fragment -->
<p>Microstep curve for n = 16. </p>

</div>
</div>
<a id="a04dd6ed9e982b70a3ccc666cf990197e" name="a04dd6ed9e982b70a3ccc666cf990197e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a04dd6ed9e982b70a3ccc666cf990197e">&#9670;&nbsp;</a></span>microstepcurve256</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">uint16_t Adafruit::microstepcurve256[]</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<b>Initial value:</b><div class="fragment"><div class="line">= {</div>
<div class="line">        0, 25, 50, 75, 100, 125, 150, 175, 200, 226, 251,</div>
<div class="line">        276, 301, 326, 351, 376, 401, 426, 451, 476, 501, 526,</div>
<div class="line">        551, 575, 600, 625, 650, 675, 700, 724, 749, 774, 798,</div>
<div class="line">        823, 848, 872, 897, 921, 946, 970, 995, 1019, 1043, 1067,</div>
<div class="line">        1092, 1116, 1140, 1164, 1188, 1212, 1236, 1260, 1284, 1308, 1332,</div>
<div class="line">        1355, 1379, 1403, 1426, 1450, 1473, 1497, 1520, 1543, 1567, 1590,</div>
<div class="line">        1613, 1636, 1659, 1682, 1705, 1728, 1750, 1773, 1796, 1818, 1841,</div>
<div class="line">        1863, 1885, 1908, 1930, 1952, 1974, 1996, 2018, 2040, 2061, 2083,</div>
<div class="line">        2105, 2126, 2148, 2169, 2190, 2212, 2233, 2254, 2275, 2295, 2316,</div>
<div class="line">        2337, 2357, 2378, 2398, 2419, 2439, 2459, 2479, 2499, 2519, 2539,</div>
<div class="line">        2558, 2578, 2597, 2617, 2636, 2655, 2674, 2693, 2712, 2731, 2750,</div>
<div class="line">        2768, 2787, 2805, 2823, 2841, 2859, 2877, 2895, 2913, 2930, 2948,</div>
<div class="line">        2965, 2983, 3000, 3017, 3034, 3051, 3067, 3084, 3100, 3117, 3133,</div>
<div class="line">        3149, 3165, 3181, 3197, 3212, 3228, 3243, 3258, 3274, 3289, 3304,</div>
<div class="line">        3318, 3333, 3348, 3362, 3376, 3390, 3404, 3418, 3432, 3446, 3459,</div>
<div class="line">        3473, 3486, 3499, 3512, 3525, 3537, 3550, 3563, 3575, 3587, 3599,</div>
<div class="line">        3611, 3623, 3634, 3646, 3657, 3668, 3680, 3691, 3701, 3712, 3723,</div>
<div class="line">        3733, 3743, 3753, 3763, 3773, 3783, 3792, 3802, 3811, 3820, 3829,</div>
<div class="line">        3838, 3847, 3855, 3864, 3872, 3880, 3888, 3896, 3903, 3911, 3918,</div>
<div class="line">        3925, 3932, 3939, 3946, 3953, 3959, 3966, 3972, 3978, 3984, 3989,</div>
<div class="line">        3995, 4000, 4006, 4011, 4016, 4021, 4025, 4030, 4034, 4038, 4042,</div>
<div class="line">        4046, 4050, 4054, 4057, 4061, 4064, 4067, 4070, 4072, 4075, 4077,</div>
<div class="line">        4079, 4081, 4083, 4085, 4087, 4088, 4090, 4091, 4092, 4093, 4093,</div>
<div class="line">        4094, 4094, 4094, 4095}</div>
</div><!-- fragment -->
<p>Microstep curve for n = 256. </p>

</div>
</div>
<a id="a94c32261bebc8e73fb641db53243a083" name="a94c32261bebc8e73fb641db53243a083"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a94c32261bebc8e73fb641db53243a083">&#9670;&nbsp;</a></span>microstepcurve32</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">uint16_t Adafruit::microstepcurve32[]</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<b>Initial value:</b><div class="fragment"><div class="line">= {0, 200, 401, 600, 798, 995, 1188, 1379, 1567, 1750, 1930,</div>
<div class="line">                                          2105, 2275, 2439, 2597, 2750, 2895, 3034, 3165, 3289, 3404, 3512,</div>
<div class="line">                                          3611, 3701, 3783, 3855, 3918, 3972, 4016, 4050, 4075, 4090, 4095}</div>
</div><!-- fragment -->
<p>Microstep curve for n = 32. </p>

</div>
</div>
<a id="ac7e9b3fef08e0f0b9e39233e69450153" name="ac7e9b3fef08e0f0b9e39233e69450153"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac7e9b3fef08e0f0b9e39233e69450153">&#9670;&nbsp;</a></span>microstepcurve64</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">uint16_t Adafruit::microstepcurve64[]</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<b>Initial value:</b><div class="fragment"><div class="line">= {0, 100, 200, 301, 401, 501, 600, 700, 798, 897, 995,</div>
<div class="line">                                          1092, 1188, 1284, 1379, 1473, 1567, 1659, 1750, 1841, 1930, 2018,</div>
<div class="line">                                          2105, 2190, 2275, 2357, 2439, 2519, 2597, 2674, 2750, 2823, 2895,</div>
<div class="line">                                          2965, 3034, 3100, 3165, 3228, 3289, 3348, 3404, 3459, 3512, 3563,</div>
<div class="line">                                          3611, 3657, 3701, 3743, 3783, 3820, 3855, 3888, 3918, 3946, 3972,</div>
<div class="line">                                          3995, 4016, 4034, 4050, 4064, 4075, 4083, 4090, 4093, 4095}</div>
</div><!-- fragment -->
<p>Microstep curve for n = 64. </p>

</div>
</div>
<a id="ab47a1c5c20c2b9283061cebff7d6463d" name="ab47a1c5c20c2b9283061cebff7d6463d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab47a1c5c20c2b9283061cebff7d6463d">&#9670;&nbsp;</a></span>microstepcurve8</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">uint16_t Adafruit::microstepcurve8[]</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<b>Initial value:</b><div class="fragment"><div class="line">= {0, 798, 1567, 2275, 2895,</div>
<div class="line">                                         3404, 3783, 4016, 4095}</div>
</div><!-- fragment -->
<p>Sinusoidal microstepping curve (sine curve between 0 and pi/2) for the PWM output (12-bit range), with n + 1 points (in this case, n = 8). The last point is the beginning of the next step. </p>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.3
</small></address>
</body>
</html>
