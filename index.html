<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.3"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Adafruit Motor Shield v2 Linux Driver: Adafruit Motor Shield v2 Driver for Linux</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">Adafruit Motor Shield v2 Linux Driver<span id="projectnumber">&#160;2.0.0</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.3 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search",'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div><div class="header">
  <div class="headertitle"><div class="title">Adafruit Motor Shield v2 Driver for Linux </div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p ><a class="anchor" id="md_README"></a>This is a Linux port of the Adafruit Motor Shield v2 driver for Arduino. The port maintains parity with the Adafruit implementation, and extends it to provide more useful features. Check out <code>examples/motor.cpp</code> to understand basic usage. The library is also extensively documented, and a doxygen documentation can be generated by executing <code>make doc</code>. To build and test, execute <code>make</code>, preferably on a Raspberry Pi, and execute <code>motor.out</code> that is generated. The example here initializes the connected motor shield at the default I2C bus and address, initializes a stepper motor at port 2, and actuates it.</p>
<p >The example starts operation by initializing the motor shield: </p><div class="fragment"><div class="line"><a class="code hl_class" href="class_adafruit_1_1_motor_shield.html">Adafruit::MotorShield</a> AFMS; <span class="comment">// create an Adafruit::MotorShield object with at bus 1, device 0x60</span></div>
<div class="line">AFMS.<a class="code hl_function" href="class_adafruit_1_1_motor_shield.html#a7aab0b3edf21a30afbef558d588547f3">begin</a>(); <span class="comment">// initialize the motor shield</span></div>
<div class="ttc" id="aclass_adafruit_1_1_motor_shield_html"><div class="ttname"><a href="class_adafruit_1_1_motor_shield.html">Adafruit::MotorShield</a></div><div class="ttdoc">Object to control and maintain state for the entire motor shield. Use this class to create DC and Ste...</div><div class="ttdef"><b>Definition:</b> MotorShield.hpp:310</div></div>
<div class="ttc" id="aclass_adafruit_1_1_motor_shield_html_a7aab0b3edf21a30afbef558d588547f3"><div class="ttname"><a href="class_adafruit_1_1_motor_shield.html#a7aab0b3edf21a30afbef558d588547f3">Adafruit::MotorShield::begin</a></div><div class="ttdeci">bool _Catchable begin(uint16_t freq=1600)</div><div class="ttdoc">Initialize the I2C hardware and PWM driver, then turn off all pins.</div><div class="ttdef"><b>Definition:</b> MotorShield.cpp:193</div></div>
</div><!-- fragment --><p> At this point a stepper motor (or a DC motor) can be obtained: </p><div class="fragment"><div class="line"><a class="code hl_class" href="class_adafruit_1_1_stepper_motor.html">Adafruit::StepperMotor</a> *motor = AFMS.<a class="code hl_function" href="class_adafruit_1_1_motor_shield.html#a0f2235f67aefa9fc9000b73b08ab1a83">getStepper</a>(200, 2, Adafruit::MicroSteps::STEP16);</div>
<div class="ttc" id="aclass_adafruit_1_1_motor_shield_html_a0f2235f67aefa9fc9000b73b08ab1a83"><div class="ttname"><a href="class_adafruit_1_1_motor_shield.html#a0f2235f67aefa9fc9000b73b08ab1a83">Adafruit::MotorShield::getStepper</a></div><div class="ttdeci">StepperMotor * getStepper(uint16_t steps, uint8_t port, MicroSteps microsteps=STEP16)</div><div class="ttdoc">Returns a pointer to an already-allocated Adafruit::StepperMotor object with a given steps per rotati...</div><div class="ttdef"><b>Definition:</b> MotorShield.cpp:298</div></div>
<div class="ttc" id="aclass_adafruit_1_1_stepper_motor_html"><div class="ttname"><a href="class_adafruit_1_1_stepper_motor.html">Adafruit::StepperMotor</a></div><div class="ttdoc">Object that controls and keeps state for a single stepper motor.</div><div class="ttdef"><b>Definition:</b> MotorShield.hpp:198</div></div>
</div><!-- fragment --><p> The stepper motor is initialized on port 2, does 200 steps per revolution, and has 16 microsteps per step. At 16 microsteps, the motor can be driven at ~5 rpm max in microstepping mode. After obtaining the motor, the speed of rotation needs to be set: </p><div class="fragment"><div class="line">motor-&gt;<a class="code hl_function" href="class_adafruit_1_1_stepper_motor.html#a93ff5a437f73545322a127345a08e0ee">setSpeed</a>(1); <span class="comment">// sets speed to 1 RPM</span></div>
<div class="ttc" id="aclass_adafruit_1_1_stepper_motor_html_a93ff5a437f73545322a127345a08e0ee"><div class="ttname"><a href="class_adafruit_1_1_stepper_motor.html#a93ff5a437f73545322a127345a08e0ee">Adafruit::StepperMotor::setSpeed</a></div><div class="ttdeci">bool _Catchable setSpeed(double rpm)</div><div class="ttdoc">Set the delay for the Stepper Motor speed in RPM. Throws exception in case rpm &lt;= 0.</div><div class="ttdef"><b>Definition:</b> MotorShield.cpp:458</div></div>
</div><!-- fragment --><p> The <code>setSpeed()</code> method sets the desired speed of the motor, in this instance to 1 RPM. Now the motor can be stepped by the desired number of steps using the <code>step()</code> function: </p><div class="fragment"><div class="line">motor-&gt;<a class="code hl_function" href="class_adafruit_1_1_stepper_motor.html#a2f8f5ef39dbed1fc38c2a073c0f0e370">step</a>(200, Adafruit::MotorDir::FORWARD, Adafruit::MotorStyle::MICROSTEP);</div>
<div class="ttc" id="aclass_adafruit_1_1_stepper_motor_html_a2f8f5ef39dbed1fc38c2a073c0f0e370"><div class="ttname"><a href="class_adafruit_1_1_stepper_motor.html#a2f8f5ef39dbed1fc38c2a073c0f0e370">Adafruit::StepperMotor::step</a></div><div class="ttdeci">void _Catchable step(uint16_t steps, MotorDir dir, MotorStyle style=SINGLE, bool blocking=true)</div><div class="ttdoc">Move the stepper motor with the given RPM speed, at the speed set using Adafruit::StepperMotor::setSp...</div><div class="ttdef"><b>Definition:</b> MotorShield.cpp:506</div></div>
</div><!-- fragment --><p> The motor, here, is requested to perform 200 steps in the 'forward' direction using microstepping to produce a smooth motion. Note: Using <code>Adafruit::MotorStyle::SINGLE</code> or <code>Adafruit::MotorStyle::DOUBLE</code>, as applicable for the stepper motor in question, would allow a maximum speed of approximately 68 RPM at the expense of jerky motion. Stepper motors, when not moving, have their coils energized to provide stall torque. If stall torque is not required, the motor can be released to reduce power consumption: </p><div class="fragment"><div class="line">motor-&gt;<a class="code hl_function" href="class_adafruit_1_1_stepper_motor.html#ab5862130756e1582d6d5399e39fbc786">release</a>();</div>
<div class="ttc" id="aclass_adafruit_1_1_stepper_motor_html_ab5862130756e1582d6d5399e39fbc786"><div class="ttname"><a href="class_adafruit_1_1_stepper_motor.html#ab5862130756e1582d6d5399e39fbc786">Adafruit::StepperMotor::release</a></div><div class="ttdeci">void release(void)</div><div class="ttdoc">Release all pins of the stepper motor so it free-spins.</div><div class="ttdef"><b>Definition:</b> MotorShield.cpp:448</div></div>
</div><!-- fragment --><p> Exiting the program automatically releases the motor. </p>
</div></div><!-- PageDoc -->
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.3
</small></address>
</body>
</html>
